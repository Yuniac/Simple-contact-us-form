<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="icon" href="#" />
		<title>Contact Us Form</title>
		<style>
			/* the form */
			.contact-us-form {
				--main-color: #b5eaea;
				--secondary-color: #edf6e5;
				--cta-color: #f38ba0;
				font-family: inherit;
				width: clamp(359px, 60%, 1400px);
				margin: 32px auto;
				padding: 32px;
				border-top-right-radius: 22px;
				border-top-left-radius: 22px;
				border: 2px solid var(--main-color);
				border-top: none;
				position: relative;
			}
			@media (max-width: 670px) {
				.contact-us-form {
					padding: 32px 4px;
				}
			}

			/* the legend: "Contact Us" text */
			.contact-us-form legend {
				border-top-left-radius: 22px;
				border-top-right-radius: 22px;
				background-color: var(--main-color);
				padding: 15px;
				padding-left: 32px;
				font-size: 20px;
				position: absolute;
				top: 0;
				left: 0;
				right: 0;
			}

			/* the inputs and the text area, in their normal state and upon focus/active */
			.contact-us-form input,
			.contact-us-form textarea {
				width: clamp(200px, 60%, 80%);
				border-radius: 16px;
				padding: 8px;
				margin: 5px 0;
			}
			.contact-us-form textarea {
				resize: none;
				border: 1px solid var(--main-color);
				margin-bottom: 16px;
			}
			.contact-us-form input {
				appearance: none;
				-webkit-appearance: none;
				border: 1px solid var(--main-color);
			}
			.contact-us-form input:focus,
			.contact-us-form input:active,
			.contact-us-form textarea:focus,
			.contact-us-form textarea:active {
				outline: 1px solid var(--secondary-color);
				border: 2px solid transparent;
				text-indent: 2px;
			}

			/* inputs labels */
			.contact-us-form .input-label {
				background-color: var(--secondary-color);
				color: black;
				border-radius: 22px;
				min-width: 128px;
				max-width: max-content;
				text-align: left;
				padding: 8px;
				margin: 16px 0;
				display: flex;
				justify-content: flex-start;
				align-items: center;
				margin-right: 32px;
			}
			/* the text area label is a little bit special (and so is it's parent div (.message-container) as you will see blow) */
			.contact-us-form .message-container .input-label {
				margin-top: 4px;
			}

			/* each input/label container div */
			.contact-us-form .generic-container {
				display: flex;
				justify-content: flex-start;
				align-items: center;
				padding: 16px 0;
				margin: 16px 0 0;
				position: relative;
			}
			/* the text area container div */
			.contact-us-form .message-container {
				align-items: flex-start;
			}
			@media (max-width: 670px) {
				.contact-us-form .generic-container {
					align-items: flex-start;
					flex-direction: column;
					margin: 8px 0;
				}
				.contact-us-form input,
				.message-container textarea {
					width: 90%;
				}
			}
			/* the: this field is required asterisk*/
			.contact-us-form .form-required-field {
				height: 13px;
				margin-left: 8px;
				color: var(--cta-color);
			}
			/* the: this field is required notice message*/
			.contact-us-form .form-notes {
				color: grey;
				font-size: 15px;
				position: absolute;
				top: 42px;
				right: 14px;
			}

			/* warn the user if they made a wrong input */
			.contact-us-form .warn-user {
				outline: 5px solid var(--cta-color);
			}

			/* notify the user that his submit has been successful */
			.contact-us-form .visible-popup {
				text-align: center;
				background: var(--secondary-color);
				color: black;
				box-shadow: 1px 1px var(--cta-color);
				width: 228px;
				margin: 0 auto;
				position: absolute;
				bottom: 19px;
				right: 50%;
				transform: translateX(50%);
				padding: 5px;
				border: 1px solid grey;
			}
			/* the submit button of the form */
			.contact-us-form .submit-contact-us-button {
				margin: 32px auto 0;
				display: block;
				border-radius: 22px;
				border: none;
				box-shadow: 2px 2px 5px var(--main-color);
				min-width: 128px;
				max-width: max-content;
				background-color: var(--cta-color);
				cursor: pointer;
				text-align: left;
				padding: 16px;
				margin-top: 32px;
			}
			/* in case of a wrong input, warn the user visually */
			.hidden-warning-span {
				visibility: hidden;
				position: absolute;
				bottom: 5px;
				right: 50%;
				transform: translateX(25%);
				color: var(--cta-color);
				text-decoration: underline;
				text-decoration-color: var(--secondary-color);
				font-size: 15px;
			}
			@media (max-width: 670px) {
				.hidden-warning-span {
					bottom: -5px;
					transform: translateX(50%);
				}
			}
			.visibilie-warning-span {
				visibility: visible;
			}
		</style>
	</head>
	<body>
		<div>
			<form action="/your_handling_page" method="GET" id="contact-us-form" class="contact-us-form">
				<legend>Contact Us</legend>
				<div class="generic-container">
					<label for="user_name" class="input-label">Name: <span class="form-required-field">*</span></label>
					<input type="text" name="user_name" id="user_name" placeholder="My Name is..." />
					<span class="hidden-warning-span">Enter a name (4 characters at least)...</span>
				</div>
				<div class="generic-container">
					<label for="user_name" class="input-label">E-Mail: <span class="form-required-field">*</span></label>
					<input type="text" name="user_email" id="user_email" placeholder="My Email is..." />
					<span class="hidden-warning-span">You must enter a valid email...</span>
				</div>
				<div class="generic-container">
					<label for="user_name" class="input-label">Phone (Optional):</label>
					<input type="text" name="user_phone_number" id="user_phone_number" placeholder="My Phone Number is..." />
				</div>
				<div class="generic-container message-container">
					<label for="user_message" class="input-label">Message: <span class="form-required-field">*</span></label>
					<textarea
						name="user_message"
						id="user_message"
						cols="30"
						rows="10"
						placeholder="My message is..."
						spellcheck="true"
						wrap="hard"
					></textarea>
					<span class="hidden-warning-span">You cant send an empty message...</span>
				</div>
				<p class="form-notes"><span class="form-required-field">*</span> marked fields are required.</p>
				<div>
					<button class="submit-contact-us-button" type="submit">Submit Your Message</button>
				</div>
			</form>
		</div>
		<script defer>
			// the form element;
			const contactUsForm = document.querySelector("#contact-us-form");

			// on submit (when the user finished filling up his data and wants to submit), call this function to validate what he has entered;
			contactUsForm.addEventListener("submit", validateFormContent);
			function validateFormContent(e) {
				// don't send the data right away, we have to clinet-side verify it;
				e.preventDefault();
				// all the inputs fields which we have;
				const userNameInput = document.querySelector("#user_name");
				const userEmailInput = document.querySelector("#user_email");
				const userNumberInput = document.querySelector("#user_phone_number");
				const userMessageInput = document.querySelector("#user_message");
				// this function tests each input with its value, and returns a boolean whether the input is empty or not, (it returns false if its empty or the text is spaces only too));
				function isInputEmpty(value) {
					if (!value || value === "" || value.trim() === "") {
						return true;
					} else {
						return false;
					}
				}

				let userNameIsEmpty = isInputEmpty(userNameInput.value);
				let userEmailIsEmpty = isInputEmpty(userEmailInput.value);
				let userMessageIsEmpty = isInputEmpty(userMessageInput.value);

				// validate the user name to be at least 4 characters of length, if you need more customiziation you need to edit the function below;
				function validateUserName(name) {
					return name.length >= 4;
				}
				let userNameIsValid = validateUserName(userNameInput.value);

				// validete the email the user inputs, you can use your own regex if you'd like, this regex covers a wide vareity of emails formats;
				function validateEmail(email, regex) {
					return regex.test(email);
				}

				const emailRegex = /(?!^[.+&'_-]*@.*$)(^[_\w\d+&'-]+(\.[_\w\d+&'-]*)*@[\w\d-]+(\.[\w\d-]+)*\.(([\d]{1,3})|([\w]{2,}))$)/g;
				let userEmailIsvalid = validateEmail(userEmailInput.value, emailRegex);

				// check user name || if you don't want to validate the user name comment the condition below
				if (userNameIsEmpty || !userNameIsValid) {
					userNameInput.classList.add("warn-user");
					userNameInput.nextElementSibling.classList.add("visibilie-warning-span");

					setTimeout(() => {
						userNameInput.classList.remove("warn-user");
						userNameInput.nextElementSibling.classList.remove("visibilie-warning-span");
					}, 2500);
					return;
				}

				// check the user email for both: not being empty and being an actual email address ('actual' is a little tricky because we are relying on a regular expression to figure out
				// whether it's a legit email or not, it works... for most email address out there);
				// || if you don't want to validate the user email comment the condition below
				// if (userEmailIsEmpty || !userEmailIsvalid) {
				// 	userEmailInput.classList.add("warn-user");
				// 	userEmailInput.nextElementSibling.classList.add("visibilie-warning-span");

				// 	setTimeout(() => {
				// 		userEmailInput.classList.remove("warn-user");
				// 		userEmailInput.nextElementSibling.classList.remove("visibilie-warning-span");
				// 	}, 2500);
				// 	return;
				// }

				// check user message (currently, we are only testing to see whether the message is empty or not, if you want to preform some further testing on its content like for example testing the message on a regluar expression then you can use the function we used eariler to validate the email "validateEmail". e.g:
				// validateEmail(userMessageInput.value, aRegularExpressionToTestTheMessageOn), save the return value here in a variable and pass it prefixed with a "!" to the condition below like so:
				//  if (userMessageInput || !userEmailIsvalid) <= change the conndition below to this after doing everything;
				// || if you don't want to validate the user message comment the condition below

				if (userMessageIsEmpty) {
					userMessageInput.classList.add("warn-user");
					userMessageInput.nextElementSibling.classList.add("visibilie-warning-span");

					setTimeout(() => {
						userMessageInput.classList.remove("warn-user");
						userMessageInput.nextElementSibling.classList.remove("visibilie-warning-span");
					}, 2500);
					return;
				}

				// if we got here it means all the fields have passed the validation;
				const popup = document.createElement("div");
				popup.textContent = "Your message has been submitted successfully!";
				contactUsForm.append(popup);
				popup.classList.add("visible-popup");
				setTimeout(() => {
					popup.remove();
				}, 2000);
				const formInputs = [userNameInput, userEmailInput, userNumberInput, userMessageInput];
				// reset the fields;
				formInputs.forEach((input) => (input.value = ""));
			}
		</script>
	</body>
</html>
